<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Read it to me</title>
  </head>
  <body>
    <button onclick="randomizeUrl()">Reset cache</button>
    <button onclick="resetLocalStorage(); randomizeUrl();">Restore initial document</button>

    <article id="content" contenteditable>
      <h1>Read it to me</h1>
      <p>A web app to make the browser read any text to you</p>

      <h2>How to use</h2>
      <ol>
        <li>
          Open the page in a browser with the "Read aloud" functionality, 
          such as <a href="https://www.microsoft.com/edge">Microsoft Edge</a>
        </li>
        <li>Change the text in the web page! It's fully editable</li>
        <li>Enter Immersive Reader mode (F9 on Microsoft Edge for Windows)</li>
        <li>Click the <em>Read Aloud</em> button</li>
        <li>Eventually change the voice to read in a different language</li>
      </ol>

      <h2>Buttons</h2>
      <p>The two buttons are for:</p>
      <ul>
        <li>
          <strong>Reset cache</strong>: If you need to use the page again, you might need to reset
          the Immersive Reader's cache. This button will randomize the page URL, so you'll reset the
          page cache.
        </li>
        <li>
          <strong>Restore initial document</strong>: Restores the document to the initial state.
        </li>
      </ul>

      <h2>Some lorem ipsum</h2>
      <p>
        The following lorem ipsum are to make this article long enough and enable the immersive
        reader button.
      </p>
      
      <hr />
      
      <p>
        Debitis eligendi totam saepe deleniti vel animi quisquam quam blanditiis, tenetur autem,
        officia illo error expedita in. Autem dignissimos hic consectetur deleniti? Vel incidunt
        odit hic praesentium dolores beatae eveniet!
      </p>
      <p>
        Atque ipsa sapiente nihil placeat molestiae iure, illo est, praesentium accusamus harum
        repudiandae magnam qui provident inventore nam, voluptatem hic sed aliquam quasi
        consequuntur et quo unde neque veritatis? Quam.
      </p>
      <p>
        Itaque, voluptatum deleniti possimus quaerat quae, repellendus nisi, esse veritatis quia
        velit soluta. Laudantium ad praesentium dolor consequatur at et voluptatibus, ipsa dicta
        esse doloribus molestias possimus odio corporis recusandae!
      </p>
      <p>
        Sed mollitia molestiae qui velit neque architecto tempore corrupti tenetur adipisci voluptas
        ipsam quaerat fugiat est delectus perferendis, consequuntur consequatur quos ex amet
        officia! Harum sequi voluptates quis quos omnis?
      </p>
      <p>
        A exercitationem, atque commodi voluptas officia magnam laudantium numquam consequuntur,
        neque cumque illo voluptatum! Ab corporis veritatis exercitationem culpa amet consequatur
        quibusdam quas natus nisi beatae vero, nulla blanditiis itaque!
      </p>
      <p>
        Necessitatibus incidunt fugiat repellat cumque ducimus autem eos quis possimus, vero
        doloribus eaque minus. Animi enim vel minus, accusantium, explicabo deserunt, possimus eos
        accusamus ratione suscipit repudiandae quidem eveniet? Ipsum.
      </p>
      <p>
        Eum sed itaque consequatur iusto consequuntur blanditiis unde magnam vitae hic aut amet
        reiciendis explicabo alias, minima assumenda aliquid? Sit quia blanditiis distinctio
        molestiae dolores eum exercitationem nihil inventore nulla!
      </p>
      <p>
        Inventore nihil corrupti nostrum reiciendis consequuntur vero quod laudantium deserunt
        mollitia voluptatem sapiente fugit ipsam nisi excepturi atque accusantium impedit accusamus
        tenetur quidem, ipsum officiis? Repellendus nostrum ad quisquam id!
      </p>
      <p>
        Harum nam illo optio molestias eaque quasi commodi atque quod nihil libero, ducimus
        cupiditate maiores, repellendus aut a. Impedit eaque eius quos incidunt fugit blanditiis
        aliquid, magnam accusantium corrupti fugiat.
      </p>
      <p>
        Nesciunt expedita facere voluptas iure fugiat perspiciatis magni ipsum error, possimus
        itaque, neque, voluptatibus labore quidem blanditiis. Tempora corrupti necessitatibus ipsa
        minima quaerat assumenda vero reprehenderit! Eius rerum amet deserunt?
      </p>
      <p>
        Impedit unde eum et corporis? Sed delectus maxime sunt dicta aspernatur consequatur quos
        similique quaerat, voluptatibus distinctio deleniti earum dignissimos veniam eaque officia?
        Error fugit alias officia illo nisi ea.
      </p>
      <p>
        Cupiditate, ipsam adipisci dignissimos laboriosam facere voluptates, est, officia ducimus
        quod debitis quaerat numquam quibusdam commodi. Iste blanditiis repudiandae neque,
        voluptatibus doloribus in porro velit totam vel sapiente, ullam quidem!
      </p>
      <p>
        Incidunt magnam in quas error laborum voluptatum autem? Incidunt placeat magni officia alias
        aspernatur earum quas inventore fugit cum, quod quo ipsum molestiae veritatis? Fugit libero
        quasi cumque a quas!
      </p>
      <p>
        Architecto porro quod et ducimus exercitationem rerum quibusdam, ab ex, ipsa doloribus ullam
        vitae assumenda possimus consequatur nostrum! Soluta fuga esse nisi quam necessitatibus
        minus laudantium similique vero sed ad.
      </p>
      <p>
        Minus non explicabo quae ipsa commodi sint! Asperiores tempore inventore perspiciatis
        maiores minima? Adipisci iure, unde porro odio obcaecati nesciunt error, suscipit facilis
        quam aliquid ad architecto illum praesentium nisi.
      </p>
      <p>
        Accusamus neque reprehenderit dolor sint velit voluptates cupiditate minus ipsam. Molestiae
        suscipit quo totam deleniti illo quisquam facere ea, iste culpa rerum cum eaque id
        recusandae autem unde, repellendus porro!
      </p>
      <p>
        Qui quod error non maxime quibusdam, repellendus ipsa numquam velit dolore quae mollitia
        totam, laudantium fuga explicabo sunt culpa similique officia dolor autem. Exercitationem
        labore, repellendus placeat molestias dignissimos ducimus?
      </p>
      <p>
        Culpa aperiam commodi placeat aliquid ex mollitia labore dolorum itaque eius laboriosam.
        Illo velit, exercitationem, sequi inventore modi fuga voluptas alias neque magnam officia
        dolore nihil! Iusto neque sapiente vel!
      </p>
      <p>
        Asperiores explicabo quidem laboriosam dolores temporibus adipisci magnam sed commodi ipsa!
        In dolor nihil, a deserunt assumenda obcaecati blanditiis sint veniam alias vitae inventore
        hic. Ullam neque asperiores a mollitia.
      </p>
    </article>

    <script>
      const contentEl = document.getElementById("content");
      const saveToLocalStorage = () => {
        sessionStorage.setItem("content", contentEl.innerHTML);
      };
      const loadFromLocalStorage = () => {
        const content = sessionStorage.getItem("content");
        if (content === null) return;
        contentEl.innerHTML = content;
      };
      const resetLocalStorage = () => {
        sessionStorage.removeItem("content");
      };
      const randomizeUrl = () => {
        window.location.search = "v=" + Math.random();
      };
      loadFromLocalStorage();
      contentEl.addEventListener("input", saveToLocalStorage);
    </script>
  </body>
</html>
